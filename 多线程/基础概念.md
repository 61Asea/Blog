# 基础概念

## 1. 进程与线程

进程：操作系统分配资源和调度的基本单位，是代码在**数据集合上的一次运行活动**

线程：CPU资源分配的基本单位（最终占用CPU资源的是线程）

线程是进程中的一个实体，不能独立存在，是进程的一个执行路径。进程至少有一个线程，进程中的线程共享进程的资源

## 2. 线程的状态

![线程状态图](https://upload-images.jianshu.io/upload_images/13963670-9abc4a50be132d6e.png?imageMogr2/auto-orient/strip|imageView2/2/w/1122/format/webp)

共五个状态：
1. new（创建状态）

    new Thread()：创建了线程对象，尚未调用start()方法的线程

2. runnable（运行状态）

    调用了start()方法，先处于ready，得到CPU资源后转换为running

    - ready（准备状态）：此时线程已获得除Cpu资源以外的其他资源（JVM中为线程分配虚拟机栈、程序计数器和本地方法栈）
    - running（运行状态）：获得OS的CPU资源

3. block（阻塞状态）

    - timed_waiting（计时等待状态）

        在一定时间后被系统唤醒，一般是线程调用带超时参数的方法进入，如：Thread.sleep(long time) / Thread.join(long time) / Object.wait(long time)

    - waiting（无限期等待状态）

        不会被分配cpu资源，需要显示唤醒，一般由持有锁的线程调用锁对象的wait()方法

        被notify/notifyAll唤醒后被加入到锁池中，变为blocked状态

    - blocked（阻塞状态）
    
        进入同步阻塞块后，发现竞争不到锁，将会进入锁池中，线程处于blocked状态

4. dead/terminated（终止状态）

    已终止状态，线程正常运行完毕或捕获异常中止
