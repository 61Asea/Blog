# 1. 类加载机制

## 1.1 类的生命周期

- 加载（可参考ClassLoader的loadClass方法）

    通过一个类的全限定名将类二进制字节流流加载到内存，并在内存中生成一个java.lang.Class对象，作为**方法区这个类的各种数据访问入口**

    知识点：方法区运行时常量池和静态常量池的区别，静态常量池在编译的时候存放类的字面量和符号引用，在**类加载时**，静态常量池的数据会存入到运行时常量池中

    常量池存放：类名/类访问修饰符/常量池/字段描述/方法描述

- 连接
    - 验证
    - 准备

        正式为类变量分配内存并设置类变量初始值，这些变量所使用的内存都将在方法区中分配。这时候进行内存分配的仅包括类变量（被static修饰的变量），不包括实例变量，实例对象会随着对象实例化（初始化）随着对象一起分配到堆中

    - 解析

- 初始化
- 使用
- 卸载

加载/连接/初始化都是在**程序运行期间完成的**

**加载、验证、准备、初始化、卸载**这个5个阶段的顺序是确定的，类的加载必须严格按照这种顺序开始

解析阶段可以在初始化之后再开始，这是为了**支持Java的运行时绑定（动态绑定｜晚期绑定）**

# 2. 双亲委托机制